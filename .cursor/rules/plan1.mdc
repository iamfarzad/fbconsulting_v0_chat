---
description: 
globs: 
alwaysApply: true
---
Good. This version covers all architectural, behavioral, and enforcement-level rules clearly.

Hereâ€™s a cleaned and ready-to-paste .rules file, with everything you just reviewed integrated correctly â€” structured, consistent, and focused on enforcement:

â¸»



# .rules
# Purpose: Define operational and architectural rules for Cursor AI use on this project.
# Last Updated: April 10, 2025

## General Directives
- These rules MUST be followed at all times.
- Reuse relevant logic, structure, or content from:
  - @plan_for_fbconsulting_webapp.md
  - @Progress_update.md
Path to old project that needs to be reused. 
  - /Users/farzad/vscode/fbconsulting_v0_chat/oldproject

## Development Philosophy
- Build only what is needed. Do not overengineer.
- Reuse or extend existing code. Do not rewrite unless broken.
- Follow clean structure, short logic blocks, and minimal coupling.

---

## ğŸ” File Reuse Rules
- **Check first**: Always inspect `/src` and `/oldproject` before creating anything new.
- **No duplicates**: Never recreate a component, style, or layout that already exists.
- **Enhance**: If the old version works but lacks a feature, extend it. Don't rewrite.

---

## ğŸ§© Frontend (Next.js + Tailwind CSS)
- Use **Pages Router**, not App Router.
- All UI blocks go in `/components/sections/`.
- Use Tailwind utility classes only.
- Avoid inline styles or global overrides.
- React server components by default. `"use client"` only when required.
- Reuse components from:
  - https://21st.dev
  - https://github.com/iamfarzad/empathic-voice-interface-starter.git
  - https://github.com/iamfarzad/blog-nextjs-sanity.git

### Components to Reuse
- Hero.tsx
- Features.tsx
- Testimonials.tsx
- Services.tsx
- CTA.tsx
- Footer.tsx

---

## ğŸ›  Backend (Express/TypeScript or FastAPI)
- For Node: `/src/server/routes/` â†’ endpoints, `/services/` â†’ logic.
- Use `async/await`, not callbacks.
- Return proper HTTP status codes.
- All API integration deferred until **frontend is complete**.

---

## Integration
- Types in `/src/types/`, shared between backend and frontend.
- RESTful conventions: `GET /api/users`, `POST /api/enrich`, etc.
- Only fetch from defined routes. Never inline payload formats.

---

## ğŸ“ Folder Structure (Strict)
frontend/
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ index.tsx
â”‚   â”œâ”€â”€ about.tsx
â”‚   â”œâ”€â”€ contact.tsx
â”‚   â”œâ”€â”€ services.tsx
â”‚   â”œâ”€â”€ blog/
â”‚   â”œâ”€â”€ quote/
â”‚   â””â”€â”€ examples/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ sections/
â”‚   â””â”€â”€ ui/
â”œâ”€â”€ styles/
â”œâ”€â”€ lib/
â”œâ”€â”€ public/
â””â”€â”€ .env.local

---

## ğŸ§± Artifact Renderers (DO NOT BREAK)
- `/artifacts/` contains renderers for AI output (code, image, sheet, text).
- These are injected into chat messages and often styled or animated.

### Enforce:
- Do not rename, restructure, or disable any `/artifacts/` files.
- Do not remove transitions or break visual compatibility.
- Never bypass the renderer selection logic.
- Do not touch `client.tsx` or `server.ts` in these folders unless adding support.

Test rendering for:
- Code blocks
- Image display
- Document text
- Sheets/tables

---

## ğŸ“Š Lead Gen + Chat Architecture

**Pipeline:**
- Name/email â†’ `/api/enrich` â†’ context
- â†’ `/api/chat` â†’ Gemini with context
- â†’ quote
- â†’ `/api/send-email`

**Backend Plan (Only after frontend complete):**
- Python 3.10+ / FastAPI
- Routes:
  - `/api/enrich`
  - `/api/chat`
  - `/api/send-email`
  - `/api/quote`
- Use SQLite, Supabase, or Firestore

**Backend Folder (Planned):**
backend/
â”œâ”€â”€ main.py
â”œâ”€â”€ core/
â”œâ”€â”€ db/
â”œâ”€â”€ mcp/

---

## ğŸ§ª Rate Limiting
- Vercel Firewall template on `/api/*`: 50â€“100 req/min, 15-min block
- Optional: fallback in-code rate limiter using Redis, TTLCache, or Map

If blocked:
```json
{
  "error": "Rate limit exceeded",
  "retryAfter": "15m"
}



â¸»

ğŸ§  Internal Structure Enforcement
	â€¢	Log ALL progress in /PROJECT_TASKS.md
	â€¢	No backend development until frontend is production-ready.
	â€¢	Never break or bypass Vercel AI SDK logic.
	â€¢	Follow layout and code reuse strategy.
	â€¢	All updates and additions must be logged immediately in:
	â€¢	/Users/farzad/vscode/fbconsulting_v0_chat/PROJECT_TASKS.md

â¸»

ğŸ§¼ Formatting & Conventions
	â€¢	PascalCase â†’ React Components
	â€¢	camelCase â†’ functions/variables
	â€¢	kebab-case â†’ filenames
	â€¢	ESLint + Prettier must pass on all files
	â€¢	Group imports: external â†’ internal â†’ styles

â¸»

â›” Forbidden Actions
	â€¢	Do not overengineer.
	â€¢	Do not change file structure.
	â€¢	Do not break artifact renderers.
	â€¢	Do not modify backend plans until instructed.
	â€¢	Do not skip logging.

Let me know if you want this saved into your actual `.rules` file in the repo or exported for local use.



documents 
https://sdk.vercel.ai/providers/ai-sdk-providers/google-vertex


https://sdk.vercel.ai/providers/ai-sdk-providers/google-generative-ai

https://sdk.vercel.ai/docs/guides/multi-modal-chatbot

https://sdk.vercel.ai/docs/ai-sdk-core/overview